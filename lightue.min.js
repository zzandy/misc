var Lightue=function(){"use strict";function e(e){return e.replace(/\B([A-Z])/g,"-$1").toLowerCase()}function r(e){return"object"==typeof e&&null!=e}function t(e){return["string","number"].indexOf(typeof e)>-1}function i(e,r,t){var i=e.splice(r,1);e.splice(t,0,i[0])}function n(e){e?.VNode?.cleanup?.(),e?.remove()}var a=e=>(r,t)=>r.classList[t?"add":"remove"](e),s=e=>(r,t)=>{var i=r.VNode;r==i.el&&(i.placeholder||(i.placeholder=new Comment(e)),t&&i.isStashed?(i.placeholder.parentNode?.insertBefore(r,i.placeholder),i.placeholder.remove(),i.isStashed=!1):t||i.isStashed||(r.parentNode?.insertBefore(i.placeholder,r),r.remove(),i.isStashed=!0))},l=(e,r,t)=>{e.texts[r]=document.createTextNode(t),e.el.appendChild(e.texts[r])},o=e=>(r,t)=>r.VNode.texts[e].textContent=t,c=e=>(r,t)=>null!=t&&!1!==t?r.setAttribute(e,t):r.removeAttribute(e),h=(e,r)=>(r,t)=>{var i,a=document.createDocumentFragment();t._ls&&t._depNodes.push([e,t,e=>e]),t._mappedFrom&&t._mappedFrom[0].push([e,...t._mappedFrom.slice(1)]),i=t.map(((r,t)=>new p(r,t,e.key+"-item",a))),e.el.insertBefore(a,e.arrEnd),e.childArr.forEach((e=>n(e.el))),e.childArr=i},d=null,u=!1;function f(e,t,i){var n,a="function"==typeof i?i:void 0;if("function"==typeof e)return m(e,((e,t,s)=>{if(r(e))n=NaN;else{if(e==n)return;n=e}a?a(t,e,s):t[i]=e}),t?window.WeakRef?new WeakRef(t):t:null);a?a(t,e):t[i]=e}function p(i,u,p,y,v,m){u=String(u),this.key=p||"";var A=(i,v)=>{if(t(i)||Array.isArray(i)||null==i)this.el?t(i)?o("$$")(this.el,i):Array.isArray(i)&&h(this)(this.el,i):(this.tag="$_"==u.slice(0,2)?"span":"div",this.el=document.createElement(this.tag),m&&m.parentNode?(m.parentNode.insertBefore(this.el,m),n(m)):y&&y.appendChild(this.el),m=this.el,p&&this.el.classList.add(p),this.texts={},this.childArr=[],this.el.VNode=this,t(i)?l(this,"$$",i):Array.isArray(i)&&(this.arrStart=new Comment("arr start"),this.arrEnd=new Comment("arr end"),this.el.appendChild(this.arrStart),this.el.appendChild(this.arrEnd),this.arrUpdate=v,h(this)(this.el,i)));else for(var A in this.tag=i&&i.$tag||("$_"==u.slice(0,2)?"span":"div"),this.el=document.createElement(this.tag),m&&m.parentNode?(m.parentNode.insertBefore(this.el,m),n(m)):y&&y.appendChild(this.el),m=this.el,p&&this.el.classList.add(p),this.texts={},this.childArr=[],this.el.VNode=this,i){let n=i[A];if("$if"==A||"$checked"==A||null!=n)if("$"==A[0])if("$$"==A.slice(0,2)){var g=d;d=null;var $="function"==typeof n?n():n;d=g,"$$"==A&&Array.isArray($)?(this.arrStart=new Comment("arr start"),this.arrEnd=new Comment("arr end"),this.el.appendChild(this.arrStart),this.el.appendChild(this.arrEnd),this.arrUpdate=f(n,this.el,h(this))):r($)?this._addChild(n,A):t($)&&(l(this,A,$),f(n,this.el,o(A)))}else if("$_"==A.slice(0,2))this._addChild(n,A,e(A.slice(2)));else if("$if"==A){f("function"==typeof n?()=>Boolean(n()):Boolean(n),this.el,s(p))}else"$class"==A?Object.keys(n).forEach((r=>{f(n[r],this.el,a(e(r)))})):"$value"==A&&["input","textarea","select"].indexOf(this.tag)>-1?f(n,this.el,"value"):"$checked"==A&&"input"==this.tag?f(n,this.el,"checked"):"$cleanup"==A&&(this.cleanup=n);else"_"==A[0]?f(n,this.el,c(e(A.slice(1)))):"on"==A.slice(0,2)?this.el.addEventListener(A.slice(2),n):this._addChild(n,A,e(A))}};"function"==typeof i?f(i,null,((e,r,t)=>{A(r,t)})):A(i)}p.prototype._addChild=function(e,r,t){new p(e,r,t,this.el)};var y=window.FinalizationRegistry&&new FinalizationRegistry((e=>{e.set.delete(e.item)}));function v(e){if(!r(e)||e._ls)return e;var t={},a=Array.isArray(e)?[]:{},s=[];return new Proxy(e,{get:function(e,l){return"_ls"==l||("_target"==l?e:"_deps"==l?t:"_depNodes"==l?s:"string"==typeof l&&"$"==l[0]?((o=()=>this.get(e,l.slice(1))).toString=o,o):Array.isArray(e)&&"map"==l&&u?function(t){var i=e.map(((e,i)=>(r(e)&&(a[i]=a[i]||v(e)),t(a[i]||e,i))));return i._mappedFrom=[s,e,t],i}:Array.isArray(e)&&"move"==l?(r,t)=>{for(var n of(i(e,r,t),i(a,r,t),s)){var l=n[0];i(l.childArr,r,t),l.el.insertBefore(l.childArr[t].el,l.childArr[t+1]?.el||l.arrEnd)}}:null==e[l]||e.hasOwnProperty(l)?(Array.isArray(e)&&"length"==l&&(l="_length"),t[l]||(t[l]=new Set),d&&(t[l].add(d[0]),d[1]&&y&&y.register(d[1],{set:t[l],item:d[0]})),Array.isArray(e)&&"_length"==l?e.length:(r(o=e[l])&&(a[l]=a[l]||v(o)),a[l]||o)):Array.isArray(e)&&"splice"==l?(i,l,...o)=>{var c=e.length;e.splice(i,l,...o),a.splice(i,l,...new Array(o.length));var h=e.length;for(var f of s){for(var y=f[0],m=f[2],A=new DocumentFragment,g=0;g<l;g++)n(y.childArr[i+g]?.el);var $=o.map(((e,t)=>{var n=i+t;r(e)&&(a[n]=v(e)),d=[y.arrUpdate,y.el],u=!0;var s=m(a[n]||e,n);u=!1,d=null;var l=new p(s,n,y.key+"-item");return A.appendChild(l.el),l}));y.el.insertBefore(A,y.childArr[i+l]?.el||y.arrEnd),y.childArr.splice(i,l,...$)}c!=h&&t._length&&t._length.forEach((e=>e()))}:Array.isArray(e)||"function"!=typeof e[l]?e[l]:e[l].bind(e));var o},set:function(e,i,n){if((!Array.isArray(e)||"length"!=i)&&e[i]==n)return!0;var s=!1;if(n&&n._ls){if(e[i]==n._target)return!0;e[i]=n._target,a[i]=n}else e[i]=n,r(n)?(a[i]=v(n),s=!0):Array.isArray(e)&&"length"==i?(s=!0,i="_length"):delete a[i];return A._abortDep||(t[i]&&t[i].forEach((e=>e(s))),Array.isArray(e)&&(i=Number(i),!isNaN(i)&&i>=0&&this.get(e,"splice")(i,1,n))),!0}})}function m(e,r,t){function i(n){var a=t?.deref?t.deref():t;if(!t||a){n&&(d=[i,a]),u=!0;var s=e();u=!1,n&&(d=null),r?.(s,a,i)}}return i(!0),i}function A(e,r){var t=new p(e,"root","root",document.querySelector(r?.el||"body"));return t.el.querySelector("[autofocus]")?.focus(),t}return A.useState=function(e){return v(e)},A.watchEffect=m,A.useProp=function(e){var r=A.useState({});return A.watchEffect((()=>{var t=e();for(var i in t)r[i]=t[i]})),r},A.useComp=function(e){function r(r){return function(t,...i){var n=e(A.useProp(t),...i);return r&&(n.$class||(n.$class={}),n.$class[r]=1),n}}return new Proxy(r(),{get:function(e,t){return r(t)}})},A.for=function(e,r){for(var t=[],i=0;i<e;i++)t.push(r?r(i):"");return t},function(){var e=["div","span","form","label","input","select","option","img","button","table","tr","td","a","ul","li","section","header","footer","p"];for(var i in e){var n=e[i];A[n]=function(e){function i(i){return function(n){var a={$tag:e};return i&&(a.$class={},a.$class[i]=1),t(n)||Array.isArray(n)?(a.$$=n,a):r(n)?(n.$tag=e,r(n.$class)&&a.$class?Object.assign(n.$class,a.$class):a.$class&&(n.$class=a.$class),n):null==n||void 0===n?a:void 0}}return new Proxy(i(),{get:function(e,r){return i(r)}})}(n)}}(),A}();