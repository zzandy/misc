<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8" />
    <title>Audio</title>
    <style>
        .keyboard {
            --button-spacing: -.2rem;
            --column-offset-half: .8rem;
            --column-offset-full: 1.6rem;

            padding-bottom: var(--column-offset-half);
            padding-left: var(--button-spacing);
        }

        .main-button {
            display: inline-block;
            width: 2rem;
            height: var(--column-offset-full);
            border-radius: 2rem;
            border-width: .1rem .15rem .3rem .15rem;
            border-style: solid;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
            text-align: center;
            margin: 0 var(--button-spacing);
            line-height: 1em;
        }

        .do {
            text-decoration: underline;
        }

        .tone-0 {
            background-color: #f482af;
            border-color: #a32275;
        }

        .tone-1 {
            background-color: #d884cf;
            border-color: #7c2f81;
        }

        .tone-2 {
            background-color: #af89d2;
            border-color: #52358f;
        }

        .tone-3 {
            background-color: #8da1e0;
            border-color: #3048a8;
        }

        .tone-4 {
            background-color: #71c1f4;
            border-color: #0e6ea8;
        }

        .tone-5 {
            background-color: #7cd6cd;
            border-color: #157d5a;
        }

        .tone-6 {
            background-color: #afda81;
            border-color: #5a7d1f;
        }

        .tone-7 {
            background-color: #d8df6e;
            border-color: #9d911e;
        }

        .tone-8 {
            background-color: #f2e684;
            border-color: #dca91c;
        }

        .tone-9 {
            background-color: #fdd985;
            border-color: #ec871b;
        }

        .tone-10 {
            background-color: #fdb676;
            border-color: #ca441e;
        }

        .tone-11 {
            background-color: #f47761;
            border-color: #b41f21;
        }
    </style>
</head>

<body>
    <label><input name="mute" type="checkbox" />Mute</label>

    <script type="text/javascript">
        function bindCheckbox(name, setter) {
            for (const element of document.getElementsByName(name)) {
                setter(element.checked);
                element.addEventListener('click', function (e) {
                    setter(element.checked);
                });
            }
        }

        function makeCheck(title, value) {
            let input = mk('input');
            input.setAttribute('type', 'checkbox')

            if (value === undefined){
                input.style.visibility = 'hidden';
            }
            else {
                if (value.value)
                    input.setAttribute('checked', 'checked');
                input.addEventListener('click', e => value.value = input.checked);

            }

            let label = mk('label');
            label.appendChild(input);
            label.appendChild(text(title))

            return label;
        }

        function addRange(title, min, max, initial, setter) {
            let output = document.createElement('output');
            output.value = setter(initial);

            let input = document.createElement('input');

            input.setAttribute('type', 'range')
            input.setAttribute('min', min)
            input.setAttribute('max', max)
            input.setAttribute('value', initial)
            input.addEventListener('input', e => {
                output.value = setter(e.target.value)
            });

            let label = document.createElement('label');
            label.appendChild(document.createTextNode(title))
            label.appendChild(input);
            label.appendChild(output);


            let div = document.createElement('div');
            div.appendChild(label)

            document.body.appendChild(div);
        }

        let nameCtr = 0;

        function mk(name) { return document.createElement(name); }
        function text(txt) { return document.createTextNode(txt); }
        function div(...children) {
            let div = mk('div');
            for (let child of children)
                div.appendChild(child);

            return div;
        }

        function addPanel(title, ...children) {
            let panel = mk('fieldset');
            let legend = mk('legend');
            legend.appendChild(text(title))
            panel.appendChild(legend);
            for (let child of children)
                panel.appendChild(child);

            document.body.appendChild(panel);
        }

        function makeSelector(title, options, value) {
            let root = mk('span')
            let label = mk('label');
            label.appendChild(text(title))
            root.appendChild(label);

            let name = "name-" + nameCtr++;

            for (let option of options) {
                let input = mk('input');
                input.setAttribute('type', 'radio')
                input.setAttribute('name', name)
                input.setAttribute('value', option)
                if (option == options[0]) input.setAttribute('checked', true);
                input.addEventListener('input', e => value.value = e.target.value);

                label = mk('label');
                label.appendChild(input);
                label.appendChild(text(option));

                root.appendChild(label);
            }

            return root;
        }

        function makeButton(title, press, release, classes) {
            let b = document.createElement('button')

            b.appendChild(document.createTextNode(title))
            b.addEventListener('mousedown', press);
            b.addEventListener('mouseup', release);

            b.addEventListener('mouseenter', (e) => { if (e.buttons == 1) press() });
            b.addEventListener('mouseleave', (e) => { if (e.buttons == 1) release() });

            for (let cls of classes)
                b.classList.add(cls);

            return b;
        }

        function makeDiv(children, cls) {
            let div = document.createElement('div')
            for (const child of children) {
                div.appendChild(child);
            }

            if (cls !== undefined && cls !== null && cls.trim().length > 0)
                div.classList.add(cls.trim());

            return div;
        }

        function addDiv(children, cls) {
            let div = makeDiv(children, cls);
            document.body.appendChild(div);
            return div;
        }

    </script>

    <script type="text/javascript">

        function loop(fps, init, update, render) {
            const frameTime = 1000 / fps;
            let acc = frameTime;

            let state = init();
            let then = performance.now();

            let tick = (now) => {

                acc += now - then;
                then = now;

                let doRender = false;

                while (acc >= frameTime) {
                    acc -= frameTime;
                    state = update(state, frameTime);
                    doRender = true;
                }

                if (doRender)
                    render(state);

                requestAnimationFrame(tick);

            };
            requestAnimationFrame(tick);
        }

    </script>

    <script type="text/javascript">
        const ctx = new AudioContext();

        const muteNode = ctx.createGain();
        const gainNode = ctx.createGain();
        const envelope = ctx.createGain();
        const filter = ctx.createBiquadFilter();
        const compressor = ctx.createDynamicsCompressor();

        class Voice {
            constructor() {
                this.vco1 = ctx.createOscillator();
                this.vco2 = ctx.createOscillator();
                this.vco3 = ctx.createOscillator();
                this.vco4 = ctx.createOscillator();

                this.vco2mute = ctx.createGain();
                this.vco3mute = ctx.createGain();
                this.vco4mute = ctx.createGain();

                this.out = ctx.createGain();

                this.vco1.start();
                this.vco2.start();
                this.vco3.start();
                this.vco4.start();

                this._freq = 440;
                this._vco2mul = .5;
                this._vco3mul = 5 / 4;
                this._vco4mul = 4;

                this.updateFreq();

                connect(this.vco1, this.out);
                connect(this.vco2, this.vco2mute, this.out);
                connect(this.vco3, this.vco3mute, this.out);
                connect(this.vco4, this.vco4mute, this.out);
            }

            set freq(v) {
                this._freq = v;
                this.updateFreq();
            }

            set vco2mul(v) {
                this._vco2mul = v;
                this.vco2.frequency.setValueAtTime(this._freq * this._vco2mul, ctx.currentTime + 0.001);
            }

            set vco3mul(v) {
                this._vco3mul = v;
                this.vco3.frequency.setValueAtTime(this._freq * this._vco3mul, ctx.currentTime + 0.001);
            }

            set vco4mul(v) {
                this._vco4mul = v;
                this.vco4.frequency.setValueAtTime(this._freq * this._vco4mul, ctx.currentTime + 0.001);
            }

            set vco2level(v) {
                this.vco2mute.gain.setValueAtTime(v, ctx.currentTime + 0.001);
            }

            set vco3level(v) {
                this.vco3mute.gain.setValueAtTime(v, ctx.currentTime + 0.001);
            }

            set vco4level(v) {
                this.vco4mute.gain.setValueAtTime(v, ctx.currentTime + 0.001);
            }

            updateFreq() {
                this.vco1.frequency.setValueAtTime(this._freq, ctx.currentTime + 0.001);
                this.vco2.frequency.setValueAtTime(this._freq * this._vco2mul, ctx.currentTime + 0.001);
                this.vco3.frequency.setValueAtTime(this._freq * this._vco3mul, ctx.currentTime + 0.001);
                this.vco4.frequency.setValueAtTime(this._freq * this._vco4mul, ctx.currentTime + 0.001);
            }
        }

        envelope.gain.value = 0;

        let attack = 40;
        let decay = 50;
        let sustain = 20;
        let release = 40;

        const voice = new Voice();

        function setFrequency(f) {
            voice.freq = f;
            return f;
        }

        function value(initial, setter) {
            let _value = initial;
            setter(initial);

            return {
                get value() {
                    return _value;
                },

                set value(v) {
                    _value = v;
                    setter(_value);
                }
            }
        }

        const oscTypes = ['triangle', 'sine', 'sawtooth', 'square'];
        const shapes = {
            '\u223f': 'sine',
            '\u2227': 'triangle',
            '\u2293': 'square',
            '\u2A58': 'sawtooth'
        }
        const vco1type = value(Object.keys(shapes)[0], v => { voice.vco1.type = shapes[v]; });
        const vco2type = value(Object.keys(shapes)[0], v => { voice.vco2.type = shapes[v]; });
        const vco3type = value(Object.keys(shapes)[0], v => { voice.vco3.type = shapes[v]; });
        const vco4type = value(Object.keys(shapes)[0], v => { voice.vco4.type = shapes[v]; });

        const vco2on = value(true, v => { voice.vco2level = +v })
        const vco3on = value(true, v => { voice.vco3level = +v })
        const vco4on = value(true, v => { voice.vco4level = +v })

        bindCheckbox('mute', value => muteNode.gain.value = value ? 0 : 1);

        addRange("Volume", 0, 1000, 500, x => gainNode.gain.value = x / 1000);

        addPanel('VCOs',
            div(makeCheck("VCO1"), makeSelector('', Object.keys(shapes), vco1type)),
            div(makeCheck("VCO2", vco2on),
                makeSelector('', Object.keys(shapes), vco2type)),
            div(makeCheck("VCO2", vco3on),
                makeSelector('', Object.keys(shapes), vco3type)),
            div(makeCheck("VCO4", vco4on),
                makeSelector('', Object.keys(shapes), vco4type))
        );

        addRange('Attack', 1, 1000, 50, x => (attack = x / 1000) * 1000 + 'ms');
        addRange('Decay', 1, 1000, 50, x => (decay = x / 1000) * 1000 + 'ms');
        addRange('Sustain', 0, 1000, 200, x => (sustain = x / 1000));
        addRange('Release', 1, 1000, 50, x => (release = x / 1000) * 1000 + 'ms');

        // addRange('Filter frequency', 0, 2000, 440, x => filterMultiplier(x / 1000));
        // addRange('Filter detune', -1200, 1200, 0, x => filter.detune.value = x);
        // addRange('Filter Q', 0, 20, 0, x => filter.Q.value = x);
        // addRange('Filter gain', -50, 50, 0, x => filter.gain.value = x);
        // addSelector(['allpass', 'lowpass', 'highpass', 'bandpass', 'lowshelf', 'highshelf', 'peaking', 'notch'], value => filter.type = value)

        // addRange("Compressor Threshold", -100, 0, 0, value => compressor.threshold.value = value);
        // addRange("Compressor Knee", 0, 100, 40, value => compressor.knee.value = value);
        // addRange("Compressor Ratio", 1, 20, 12, value => compressor.ratio.value = value);
        // addRange("Compressor Attack", 0, 5, 0, value => compressor.attack.value = value);
        // addRange("Compressor Release", 0, 5, .25, value => compressor.release.value = value);

        const analyzer = ctx.createAnalyser();
        analyzer.fftSize = 2048;

        connect(voice.out, envelope, filter, gainNode, analyzer, muteNode, ctx.destination);

        function freq(mill) {
            const min = 20;
            const max = 11000;
            const range = max - min;

            return min + (mill * mill) * range;
        }

        let w = 22;
        let h = 7;

        let mainRow = h / 2 | 0;
        let mainDo = ((w / 2) | 0) - 6;

        let kbd = {};
        let rows = [];

        let kbdDiv = addDiv([], 'keyboard');
        let offset = getComputedStyle(kbdDiv).getPropertyValue('--column-offset-half');

        for (let i = 0; i < h; ++i) {
            let buts = [];
            let isWide = i % 2 == mainRow % 2

            for (let j = 0; j < w; ++j) {
                let odd = j % 2 != 0;

                let numThirds = j - mainDo;
                let numFifths = mainDo - 1 + j % 2 + mainRow - i - ((j + 1) / 2 | 0) - (mainDo / 2 | 0);

                let semitoneDif = numThirds * 4 + numFifths * 7;

                let fr = freqDiff(440, semitoneDif);
                let press = () => {
                    setFrequency(fr);
                    keyPress();
                }

                let key = getKey(i - mainRow, j - mainDo);
                btn = makeButton(key, press, keyRelease, ['main-button', getTone(semitoneDif), semitoneDif == 0 ? 'do' : 'x']);

                btn.style.position = 'relative';

                if (j % 2 == 0) btn.style.top = offset;

                buts.push(btn);

                kbd[key.charCodeAt(0)] = fr;
            }

            rows.push(makeDiv(buts))
        }
        for (let row of rows)
            kbdDiv.appendChild(row);

        let isDown = false;

        addEventListener('keydown', e => {
            if (isDown) return;
            isDown = true;

            let fr = kbd[e.keyCode]

            if (fr !== undefined) {
                setFrequency(fr);
                keyPress();
            }
        });

        addEventListener("keyup", () => { isDown = false; keyRelease() });

        loop(60, init, update, render);

        function makeCanvas() {
            const canvas = document.createElement('canvas');

            canvas.height = 300;
            canvas.width = window.innerWidth;

            document.body.appendChild(canvas);
            return canvas.getContext('2d');
        }

        function init() {
            const ctx = makeCanvas();
            analyzer.fftSize = 2 ** (Math.log2(ctx.canvas.width * 2) | 0);
            const data = new Uint8Array(analyzer.frequencyBinCount);
            const color = viridis_data().map(d => 'rgb(' + (d[0] * 255).toFixed(0) + ',' + (d[1] * 255).toFixed(0) + ',' + (d[2] * 255).toFixed(0) + ')')
            return { ctx, analyzer, data, color }
        }

        function update(state) {
            return state;
        }

        function render(state) {
            const { data, ctx, ctx2, color, analyzer } = state;
            const hdr = 20;
            analyzer.getByteFrequencyData(data);

            ctx.drawImage(ctx.canvas, 0, hdr - 1, ctx.canvas.width, ctx.canvas.height - hdr, 0, hdr, ctx.canvas.width, ctx.canvas.height - hdr)

            ctx.save();
            ctx.scale(ctx.canvas.width / data.length, 1)
            for (let i = 0; i < data.length; ++i) {
                const value = data[i];
                ctx.fillStyle = color[value];
                let log = Math.log2;
                let pos = data.length * ((log(i + 1) - log(1)) / (log(data.length) - log(1)));

                ctx.fillRect(pos, 0, data.length, hdr);
                ctx.restore();
            }

            // ctx.fillStyle = color[(255 * envelope.gain.value) | 0];
            // ctx.fillRect(200, hdr, envelope.gain.value * 100, 1);

            ctx.restore();
        }

        function keyPress() {
            const t = ctx.currentTime;

            let value = envelope.gain.value;
            envelope.gain.cancelScheduledValues(t);
            envelope.gain.setValueAtTime(value, t)
            envelope.gain.linearRampToValueAtTime(1, t + attack)
            envelope.gain.linearRampToValueAtTime(sustain, t + attack + decay)
        }

        function keyRelease() {
            const t = ctx.currentTime;

            let value = envelope.gain.value;
            envelope.gain.cancelScheduledValues(t);
            envelope.gain.setValueAtTime(Math.min(value, sustain), t + .001)
            envelope.gain.linearRampToValueAtTime(0, t + release)
        }

        function connect() {
            var prev = arguments[0];
            for (var i = 1; i < arguments.length; ++i) {
                const next = arguments[i];
                prev.connect(next);
                prev = next;
            }
        }

        function freqDiff(base, numSemitones) {
            const octaves = Math.abs(Math.floor(numSemitones / 12));
            const semitone = 1.05946309435929;

            let freq = base;

            for (let i = 0; i < octaves; ++i) {
                freq = numSemitones > 0 ? freq * 2 : (freq / 2)
            }

            let semitones = numSemitones > 0 ? numSemitones % 12 : (12 + numSemitones % 12) % 12;
            for (let i = 0; i < semitones; ++i)
                freq *= semitone

            return freq;
        }

        function getTone(numSemitones) {
            return 'tone-' + (numSemitones > 0 ? numSemitones % 12 : (12 + numSemitones % 12) % 12);
        }

        function getKey(di, dj) {
            const kb = '1234567890 qwertyuiop asdfghjkl zxcvbnm<>'.toUpperCase().split(' ').map(row => row.split(''));
            const o = 3;
            const offst = [4, 4, 3, 3];
            const empty = '\uFEFF';

            let i = di + ((dj / 2) | 0) + (dj > 0 ? (dj % 2) : 0);
            let j = o + -(di - ((dj / 2) | 0) - (dj < 0 ? (dj % 2) : 0));

            return (kb[i] || [])[j] || empty;
        }

        function viridis_data() {
            return [[0.267004, 0.004874, 0.329415],
            [0.268510, 0.009605, 0.335427],
            [0.269944, 0.014625, 0.341379],
            [0.271305, 0.019942, 0.347269],
            [0.272594, 0.025563, 0.353093],
            [0.273809, 0.031497, 0.358853],
            [0.274952, 0.037752, 0.364543],
            [0.276022, 0.044167, 0.370164],
            [0.277018, 0.050344, 0.375715],
            [0.277941, 0.056324, 0.381191],
            [0.278791, 0.062145, 0.386592],
            [0.279566, 0.067836, 0.391917],
            [0.280267, 0.073417, 0.397163],
            [0.280894, 0.078907, 0.402329],
            [0.281446, 0.084320, 0.407414],
            [0.281924, 0.089666, 0.412415],
            [0.282327, 0.094955, 0.417331],
            [0.282656, 0.100196, 0.422160],
            [0.282910, 0.105393, 0.426902],
            [0.283091, 0.110553, 0.431554],
            [0.283197, 0.115680, 0.436115],
            [0.283229, 0.120777, 0.440584],
            [0.283187, 0.125848, 0.444960],
            [0.283072, 0.130895, 0.449241],
            [0.282884, 0.135920, 0.453427],
            [0.282623, 0.140926, 0.457517],
            [0.282290, 0.145912, 0.461510],
            [0.281887, 0.150881, 0.465405],
            [0.281412, 0.155834, 0.469201],
            [0.280868, 0.160771, 0.472899],
            [0.280255, 0.165693, 0.476498],
            [0.279574, 0.170599, 0.479997],
            [0.278826, 0.175490, 0.483397],
            [0.278012, 0.180367, 0.486697],
            [0.277134, 0.185228, 0.489898],
            [0.276194, 0.190074, 0.493001],
            [0.275191, 0.194905, 0.496005],
            [0.274128, 0.199721, 0.498911],
            [0.273006, 0.204520, 0.501721],
            [0.271828, 0.209303, 0.504434],
            [0.270595, 0.214069, 0.507052],
            [0.269308, 0.218818, 0.509577],
            [0.267968, 0.223549, 0.512008],
            [0.266580, 0.228262, 0.514349],
            [0.265145, 0.232956, 0.516599],
            [0.263663, 0.237631, 0.518762],
            [0.262138, 0.242286, 0.520837],
            [0.260571, 0.246922, 0.522828],
            [0.258965, 0.251537, 0.524736],
            [0.257322, 0.256130, 0.526563],
            [0.255645, 0.260703, 0.528312],
            [0.253935, 0.265254, 0.529983],
            [0.252194, 0.269783, 0.531579],
            [0.250425, 0.274290, 0.533103],
            [0.248629, 0.278775, 0.534556],
            [0.246811, 0.283237, 0.535941],
            [0.244972, 0.287675, 0.537260],
            [0.243113, 0.292092, 0.538516],
            [0.241237, 0.296485, 0.539709],
            [0.239346, 0.300855, 0.540844],
            [0.237441, 0.305202, 0.541921],
            [0.235526, 0.309527, 0.542944],
            [0.233603, 0.313828, 0.543914],
            [0.231674, 0.318106, 0.544834],
            [0.229739, 0.322361, 0.545706],
            [0.227802, 0.326594, 0.546532],
            [0.225863, 0.330805, 0.547314],
            [0.223925, 0.334994, 0.548053],
            [0.221989, 0.339161, 0.548752],
            [0.220057, 0.343307, 0.549413],
            [0.218130, 0.347432, 0.550038],
            [0.216210, 0.351535, 0.550627],
            [0.214298, 0.355619, 0.551184],
            [0.212395, 0.359683, 0.551710],
            [0.210503, 0.363727, 0.552206],
            [0.208623, 0.367752, 0.552675],
            [0.206756, 0.371758, 0.553117],
            [0.204903, 0.375746, 0.553533],
            [0.203063, 0.379716, 0.553925],
            [0.201239, 0.383670, 0.554294],
            [0.199430, 0.387607, 0.554642],
            [0.197636, 0.391528, 0.554969],
            [0.195860, 0.395433, 0.555276],
            [0.194100, 0.399323, 0.555565],
            [0.192357, 0.403199, 0.555836],
            [0.190631, 0.407061, 0.556089],
            [0.188923, 0.410910, 0.556326],
            [0.187231, 0.414746, 0.556547],
            [0.185556, 0.418570, 0.556753],
            [0.183898, 0.422383, 0.556944],
            [0.182256, 0.426184, 0.557120],
            [0.180629, 0.429975, 0.557282],
            [0.179019, 0.433756, 0.557430],
            [0.177423, 0.437527, 0.557565],
            [0.175841, 0.441290, 0.557685],
            [0.174274, 0.445044, 0.557792],
            [0.172719, 0.448791, 0.557885],
            [0.171176, 0.452530, 0.557965],
            [0.169646, 0.456262, 0.558030],
            [0.168126, 0.459988, 0.558082],
            [0.166617, 0.463708, 0.558119],
            [0.165117, 0.467423, 0.558141],
            [0.163625, 0.471133, 0.558148],
            [0.162142, 0.474838, 0.558140],
            [0.160665, 0.478540, 0.558115],
            [0.159194, 0.482237, 0.558073],
            [0.157729, 0.485932, 0.558013],
            [0.156270, 0.489624, 0.557936],
            [0.154815, 0.493313, 0.557840],
            [0.153364, 0.497000, 0.557724],
            [0.151918, 0.500685, 0.557587],
            [0.150476, 0.504369, 0.557430],
            [0.149039, 0.508051, 0.557250],
            [0.147607, 0.511733, 0.557049],
            [0.146180, 0.515413, 0.556823],
            [0.144759, 0.519093, 0.556572],
            [0.143343, 0.522773, 0.556295],
            [0.141935, 0.526453, 0.555991],
            [0.140536, 0.530132, 0.555659],
            [0.139147, 0.533812, 0.555298],
            [0.137770, 0.537492, 0.554906],
            [0.136408, 0.541173, 0.554483],
            [0.135066, 0.544853, 0.554029],
            [0.133743, 0.548535, 0.553541],
            [0.132444, 0.552216, 0.553018],
            [0.131172, 0.555899, 0.552459],
            [0.129933, 0.559582, 0.551864],
            [0.128729, 0.563265, 0.551229],
            [0.127568, 0.566949, 0.550556],
            [0.126453, 0.570633, 0.549841],
            [0.125394, 0.574318, 0.549086],
            [0.124395, 0.578002, 0.548287],
            [0.123463, 0.581687, 0.547445],
            [0.122606, 0.585371, 0.546557],
            [0.121831, 0.589055, 0.545623],
            [0.121148, 0.592739, 0.544641],
            [0.120565, 0.596422, 0.543611],
            [0.120092, 0.600104, 0.542530],
            [0.119738, 0.603785, 0.541400],
            [0.119512, 0.607464, 0.540218],
            [0.119423, 0.611141, 0.538982],
            [0.119483, 0.614817, 0.537692],
            [0.119699, 0.618490, 0.536347],
            [0.120081, 0.622161, 0.534946],
            [0.120638, 0.625828, 0.533488],
            [0.121380, 0.629492, 0.531973],
            [0.122312, 0.633153, 0.530398],
            [0.123444, 0.636809, 0.528763],
            [0.124780, 0.640461, 0.527068],
            [0.126326, 0.644107, 0.525311],
            [0.128087, 0.647749, 0.523491],
            [0.130067, 0.651384, 0.521608],
            [0.132268, 0.655014, 0.519661],
            [0.134692, 0.658636, 0.517649],
            [0.137339, 0.662252, 0.515571],
            [0.140210, 0.665859, 0.513427],
            [0.143303, 0.669459, 0.511215],
            [0.146616, 0.673050, 0.508936],
            [0.150148, 0.676631, 0.506589],
            [0.153894, 0.680203, 0.504172],
            [0.157851, 0.683765, 0.501686],
            [0.162016, 0.687316, 0.499129],
            [0.166383, 0.690856, 0.496502],
            [0.170948, 0.694384, 0.493803],
            [0.175707, 0.697900, 0.491033],
            [0.180653, 0.701402, 0.488189],
            [0.185783, 0.704891, 0.485273],
            [0.191090, 0.708366, 0.482284],
            [0.196571, 0.711827, 0.479221],
            [0.202219, 0.715272, 0.476084],
            [0.208030, 0.718701, 0.472873],
            [0.214000, 0.722114, 0.469588],
            [0.220124, 0.725509, 0.466226],
            [0.226397, 0.728888, 0.462789],
            [0.232815, 0.732247, 0.459277],
            [0.239374, 0.735588, 0.455688],
            [0.246070, 0.738910, 0.452024],
            [0.252899, 0.742211, 0.448284],
            [0.259857, 0.745492, 0.444467],
            [0.266941, 0.748751, 0.440573],
            [0.274149, 0.751988, 0.436601],
            [0.281477, 0.755203, 0.432552],
            [0.288921, 0.758394, 0.428426],
            [0.296479, 0.761561, 0.424223],
            [0.304148, 0.764704, 0.419943],
            [0.311925, 0.767822, 0.415586],
            [0.319809, 0.770914, 0.411152],
            [0.327796, 0.773980, 0.406640],
            [0.335885, 0.777018, 0.402049],
            [0.344074, 0.780029, 0.397381],
            [0.352360, 0.783011, 0.392636],
            [0.360741, 0.785964, 0.387814],
            [0.369214, 0.788888, 0.382914],
            [0.377779, 0.791781, 0.377939],
            [0.386433, 0.794644, 0.372886],
            [0.395174, 0.797475, 0.367757],
            [0.404001, 0.800275, 0.362552],
            [0.412913, 0.803041, 0.357269],
            [0.421908, 0.805774, 0.351910],
            [0.430983, 0.808473, 0.346476],
            [0.440137, 0.811138, 0.340967],
            [0.449368, 0.813768, 0.335384],
            [0.458674, 0.816363, 0.329727],
            [0.468053, 0.818921, 0.323998],
            [0.477504, 0.821444, 0.318195],
            [0.487026, 0.823929, 0.312321],
            [0.496615, 0.826376, 0.306377],
            [0.506271, 0.828786, 0.300362],
            [0.515992, 0.831158, 0.294279],
            [0.525776, 0.833491, 0.288127],
            [0.535621, 0.835785, 0.281908],
            [0.545524, 0.838039, 0.275626],
            [0.555484, 0.840254, 0.269281],
            [0.565498, 0.842430, 0.262877],
            [0.575563, 0.844566, 0.256415],
            [0.585678, 0.846661, 0.249897],
            [0.595839, 0.848717, 0.243329],
            [0.606045, 0.850733, 0.236712],
            [0.616293, 0.852709, 0.230052],
            [0.626579, 0.854645, 0.223353],
            [0.636902, 0.856542, 0.216620],
            [0.647257, 0.858400, 0.209861],
            [0.657642, 0.860219, 0.203082],
            [0.668054, 0.861999, 0.196293],
            [0.678489, 0.863742, 0.189503],
            [0.688944, 0.865448, 0.182725],
            [0.699415, 0.867117, 0.175971],
            [0.709898, 0.868751, 0.169257],
            [0.720391, 0.870350, 0.162603],
            [0.730889, 0.871916, 0.156029],
            [0.741388, 0.873449, 0.149561],
            [0.751884, 0.874951, 0.143228],
            [0.762373, 0.876424, 0.137064],
            [0.772852, 0.877868, 0.131109],
            [0.783315, 0.879285, 0.125405],
            [0.793760, 0.880678, 0.120005],
            [0.804182, 0.882046, 0.114965],
            [0.814576, 0.883393, 0.110347],
            [0.824940, 0.884720, 0.106217],
            [0.835270, 0.886029, 0.102646],
            [0.845561, 0.887322, 0.099702],
            [0.855810, 0.888601, 0.097452],
            [0.866013, 0.889868, 0.095953],
            [0.876168, 0.891125, 0.095250],
            [0.886271, 0.892374, 0.095374],
            [0.896320, 0.893616, 0.096335],
            [0.906311, 0.894855, 0.098125],
            [0.916242, 0.896091, 0.100717],
            [0.926106, 0.897330, 0.104071],
            [0.935904, 0.898570, 0.108131],
            [0.945636, 0.899815, 0.112838],
            [0.955300, 0.901065, 0.118128],
            [0.964894, 0.902323, 0.123941],
            [0.974417, 0.903590, 0.130215],
            [0.983868, 0.904867, 0.136897],
            [0.993248, 0.906157, 0.143936]]
        }
    </script>
</body>

</html>